
#帧的类型

1. 报道帧
    C→S：总共32字节 - 4字节帧头，16个字节用户名，12个字节密码
    S→C：71 应答类型 0x00 - 正确 0x01 - 密码错误 0x02 - 用户名不存在 0x03 - 是否需要改密

2. 文本信息
    C1→S：
    S→C1：72 应答
    S→C*：77 接受信息，格式与C1→S基本一致
    按照要求发送即可

3. 改密帧
    C→S：头4字节：[0-7] 0x15 [8-15] 0x0 [16-31] 0x0010:报文长度16字节
         后12字节：密码

4. 下线退位确认帧
    C1老用户
    C2新用户
    S→C1：4字节 [0-7] 0x73 [8-15] 0x0 [16-31] 0x0004：报文长度4字节

5. 上线/下线帧
    S→C*：总共32字节 - 4字节帧头，16个字节用户名，12字节空
        帧头中[0-7]0x75 [8-15] 0x0-上线 0x1-下线
    C→S：4字节 [0-7] 0x16 [8-15] 0x0 [16-31] 0x0004 报文长度4字节 

6. 好友初始化帧
    S→C：文本信息帧 帧头[0-7]0x76 [8-15]最多256好友，当前在线好友数  其他与文本信息帧相同，每一个用户格式 @张三


7. 文件信息帧（C1→S→C2,文件大小20M以下）
	C1→S：
		文件信息帧1(第一个帧)
			长度：64
			帧头：[0-7]0x20 [8-15]0x00 [16-31]帧长 
			帧内容：C2用户名,文件长度(单位：字节),包的数量,文件名
				用户名(16 byte)文件长度(4 byte)包的数量(4 byte)文件名(36 byte)
		文件信息帧2(第二个及之后的帧)
			长度：普通长度：1024，最后一个帧的长度<=1024
			帧头：[0-7]0x21 [8-15]0x00 [16-31]帧长
			帧内容：C2用户名(16 byte),文件帧序号(4 byte),文件内容(1000 byte)
		文件信息帧3(缺包追加帧1)
			长度：64
			帧头：[0-7]0x22 [8-15]0x00 [16-31]帧长
			帧内容：C2用户名,文件长度(单位：字节),包的数量,文件名
				用户名(16 byte)文件长度(4 byte)包的数量(4 byte)文件名(36 byte)
		文件信息帧4(缺包追加帧2)
			长度：普通长度：1024，最后一个帧的长度<=1024
			帧头：[0-7]0x23 [8-15]0x00 [16-31]帧长
			帧内容：C2用户名(16 byte),文件帧序号(4 byte),文件内容(1000 byte)
	S→C1：
		文件信息帧1应答帧
			长度：4
			帧头：[0-7]0x80 [8-15]应答类型(允许传输0x00,拒绝传输0x01) [16-31]帧长
		文件信息帧2应答帧1.1(上传情况第一帧)
			长度：5
			帧头：[0-7]0x81 [8-15]应答类型(0x00 上传成功,0x01 部分帧丢失)[16-31]帧的长度
			帧内容：接下来要传输的应答帧数量(传输正确则为0)
		文本信息帧2应答帧1.2(上传情况第二及以后帧)
			长度：1024
			帧头：[0-7]0x82 [8-15]应答帧序号 [16-31]帧长
			帧内容：1020字节(8160bit)以位的形式存储每个帧的接受状况
	S→C2：
		传输文件消息帧
			长度：64
			帧头：[0-7]0x83 [8-15]0x00 [16-31]帧长 
			帧内容：C1用户名,文件长度(单位：字节),包的数量,文件名
				用户名(16 byte)文件长度(4 byte)包的数量(4 byte)文件名(36 byte)
		文件信息帧1(第一个帧)
			长度：64
			帧头：[0-7]0x84 [8-15]0x00 [16-31]帧长 
			帧内容：C1用户名,文件长度(单位：字节),包的数量,文件名
				用户名(16 byte)文件长度(4 byte)包的数量(4 byte)文件名(36 byte)
		文件信息帧2(第二个及之后的帧)
			长度：普通长度：1024，最后一个帧的长度<=1024
			帧头：[0-7]0x85 [8-15]0x00 [16-31]帧长
			帧内容：C1用户名(16 byte),文件帧序号(4 byte),文件内容(1000 byte)
		文件信息帧3(缺包追加帧1)
			长度：64
			帧头：[0-7]0x86 [8-15]0x00 [16-31]帧长
			帧内容：C1用户名,文件长度(单位：字节),包的数量,文件名
				用户名(16 byte)文件长度(4 byte)包的数量(4 byte)文件名(36 byte)
		文件信息帧4(缺包追加帧2)
			长度：普通长度：1024，最后一个帧的长度<=1024
			帧头：[0-7]0x87 [8-15]0x00 [16-31]帧长
			帧内容：C1用户名(16 byte),文件帧序号(4 byte),文件内容(1000 byte)
	C2→S：
		下载通知帧
			长度：4
			帧头：[0-7]0x24 [8-15]0x00 [16-31]帧长
		文件信息帧1应答帧
			长度：4
			帧头：[0-7]0x25 [8-15]应答类型(允许传输0x00,拒绝传输0x01) [16-31]帧长
		文件信息帧2应答帧1.1(下载情况第一帧)
			长度：5
			帧头：[0-7]0x26 [8-15]应答类型(0x00 下载成功,0x01 部分帧丢失)[16-31]帧的长度
			帧内容：接下来要传输的应答帧数量(传输正确则为0)
		文本信息帧2应答帧1.2(下载情况第二及以后帧)
			长度：1024
			帧头：[0-7]0x27 [8-15]应答帧序号 [16-31]帧长
			帧内容：1020字节(8160bit)以位的形式存储每个帧的接受状况

#服务端数据库

##用户名 - 密码（暗文）

用户名 varchar(16)
密码 varchar(12)
初次登陆 boolean
回看信息条数 int

##当前在线用户
用户名 varchar(16)
Socket int

对每一个会话建立一个文件 - 文件名[两个用户名 张三-李四]
[2018-12-12 22:22:22 张三]

群聊 - 文件名[我想静静]
[2018-12-12 22:22:22 张三]

日志文件：
[2018-12-12 22:22:22]
谁
事件(登陆/下线/退位/发送/认证失败/修改密码)
事件描述


###测试描述

M:	发送报道帧
				发送报到应答帧
	接受应答帧
	发送改密帧
				发送好友初始化帧
	接受好友初始化帧
	等待消息

T：	发送报道帧
				发送报到应答帧
	接受报到应答帧
	发送改密帧
				发送好友初始化帧
	接受好友初始化帧

M：				发送上线帧(T上线)
	接受到好友上线帧

T：	发送消息给M[This is message from tongjiayan]
//				发送消息应答帧
//	接受消息应答帧

M:				发送消息帧
	接受消息帧

Z： 发送报道帧
				发送报到应答帧
	接收到报答应答帧

	发送改密帧
				发送好友初始化帧
	接受好友初始化帧

M：				发送上线帧(Z上线)
	接受到好友上线帧

T：				发送上线帧(Z上线)
	接受到好友上线帧

Z：	发送消息给M[This is message from zhengxuanci]

M:				发送消息帧
	接受消息帧

Z：	发送消息给T[This is message from zhengxuanci]

T:				发送消息帧
	接受消息帧




